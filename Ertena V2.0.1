## ğŸ§  Prompt Codex â€“ Projet Eterna v2.0.1 (Version LM Studio-Like)

### ğŸ¯ Objectif global
CrÃ©er une application locale complÃ¨te nommÃ©e **Eterna v2.0.1**, inspirÃ©e de **LM Studio** et basÃ©e sur le projet open-source **Jan (jan.ai)**.  
Eterna doit fonctionner **100 % offline-first**, avec accÃ¨s Internet autorisÃ© uniquement pour les mises Ã  jour et intÃ©grations cloud optionnelles.

Elle doit centraliser toutes les IA nÃ©cessaires :
- LLaMA 3 (langage local)
- Stable Diffusion XL + Refiner + Turbo (images)
- Coqui XTTS (voix parlÃ©e)
- Whisper (reconnaissance vocale FR)
- ESRGAN / Real-ESRGAN (super-rÃ©solution)
- Moteur Ã©motionnel (analyse du ton et adaptation visuelle/vocale)
- Auto-coder (auto-correction et maintenance du code)
- Interface dynamique (fond rÃ©actif + avatar 3D)
- IntÃ©gration iOS distante (plus tard)

---

### ğŸ§© Architecture du projet (inspirÃ©e de LM Studio et Jan)

Eterna/
â”œâ”€â”€ frontend/                     # Interface WPF (.NET 8)
â”‚   â”œâ”€â”€ Eterna.sln
â”‚   â”œâ”€â”€ App.xaml / MainWindow.xaml
â”‚   â”œâ”€â”€ ViewModels/
â”‚   â”œâ”€â”€ Views/
â”‚   â”œâ”€â”€ Assets/
â”‚   â”‚   â”œâ”€â”€ logo.png
â”‚   â”‚   â””â”€â”€ fond_dynamique.mp4
â”‚   â””â”€â”€ Config/
â”‚       â””â”€â”€ settings.json
â”‚
â”œâ”€â”€ backend/                      # Backend Python FastAPI
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ modules/
â”‚   â”‚   â”œâ”€â”€ llama_interface.py
â”‚   â”‚   â”œâ”€â”€ sdxl_interface.py
â”‚   â”‚   â”œâ”€â”€ coqui_tts.py
â”‚   â”‚   â”œâ”€â”€ whisper_stt.py
â”‚   â”‚   â”œâ”€â”€ esrgan_upscale.py
â”‚   â”‚   â”œâ”€â”€ emotion_engine.py
â”‚   â”‚   â””â”€â”€ autocoder.py
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ file_manager.py
â”‚   â”‚   â””â”€â”€ security_lock.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ config.json
â”‚
â”œâ”€â”€ assets/                       # Ressources audio/visuelles
â”‚   â”œâ”€â”€ voix_coqui/
â”‚   â”œâ”€â”€ models/
â”‚   â””â”€â”€ ui/
â”‚
â”œâ”€â”€ setup/                        # Installateur Windows
â”‚   â”œâ”€â”€ Eterna_Installer.iss
â”‚   â””â”€â”€ icon.ico
â”‚
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ README.md
â”‚
â””â”€â”€ .github/
    â””â”€â”€ workflows/
        â””â”€â”€ build_and_push.yml

---

### âš™ï¸ Stack technique
- **Frontend :** WPF (C#, .NET 8)
- **Backend :** Python 3.11 + FastAPI
- **Communication interne :** HTTP local (`localhost:5001`)
- **Installer :** Inno Setup 6
- **ContrÃ´le de version :** Git + GitHub Actions
- **Base de dÃ©veloppement :** Jan (jan.ai) â†’ Ã  adapter Ã  Eterna

---

### ğŸ’¬ Modules et fonctionnalitÃ©s principales

#### ğŸ”¹ LLaMA 3
- ModÃ¨le local (quantisÃ© GGUF) dans `C:\models\llama`
- Interface via `/backend/modules/llama_interface.py`
- EntrÃ©e texte â†’ sortie texte
- Optimisation des performances Ã  la demande (chargement dynamique)

#### ğŸ”¹ Stable Diffusion XL + Refiner + Turbo
- LocalisÃ© dans `C:\stable-diffusion\models`
- GÃ©nÃ©ration dâ€™images Ã  la demande
- Upscale optionnel via ESRGAN

#### ğŸ”¹ Coqui XTTS (Voix)
- SynthÃ¨se vocale Ã©motionnelle
- Voix fÃ©minine personnalisÃ©e
- DÃ©clenchement automatique dÃ¨s quâ€™une rÃ©ponse texte est produite

#### ğŸ”¹ Whisper (Reconnaissance vocale)
- Reconnaissance vocale FR uniquement
- DÃ©tection automatique des commandes utilisateur
- Lancement de la rÃ©ponse vocale sans clic (mode Jarvis)

#### ğŸ”¹ ESRGAN / Real-ESRGAN
- Upscale 4x pour les designs
- ExÃ©cution via `/backend/modules/esrgan_upscale.py`

#### ğŸ”¹ Emotion Engine
- Analyse du ton et du contenu
- Adapte :
  - la couleur du fond dynamique WPF
  - la tonalitÃ© et intensitÃ© de la voix Coqui

#### ğŸ”¹ AutoCoder
- Auto-analyse et correction des fichiers Python et C#
- Sauvegarde automatique avant modification
- RedÃ©marre le backend aprÃ¨s correction
- Journalisation dans `/backend/logs/autocoder.log`

---

### ğŸ–¥ï¸ Interface WPF (inspirÃ©e LM Studio)

- Mode **sombre complet**
- Logo **Eternadream** discret (coin supÃ©rieur gauche)
- Fond dynamique animÃ© (liÃ© aux Ã©motions)
- Historique de chat dans `/frontend/Logs/ChatHistory.txt`
- Mode **plein Ã©cran (F11)**
- **Panneau latÃ©ral** de configuration IA
- **Avatar 3D animÃ©** (rotation, expressions faciales, synchronisation labiale)
- **Verrou de sÃ©curitÃ©** (clic ou commande vocale "valide")

---

### ğŸ” SÃ©curitÃ©
- Journal dâ€™actions : `/backend/logs/actions.log`
- Verrouillage vocal ou manuel des fonctions critiques
- Aucun paiement, envoi rÃ©seau ou exÃ©cution script sans validation

---

### âš™ï¸ Backend â€“ Endpoints FastAPI
- `/generate_text` â†’ LLaMA 3
- `/generate_image` â†’ SDXL / Refiner / Turbo
- `/tts` â†’ Coqui
- `/stt` â†’ Whisper
- `/upscale` â†’ ESRGAN
- `/analyze_emotion` â†’ moteur Ã©motionnel
- `/autocode` â†’ module dâ€™auto-codage
- `/security/lock` â†’ gestion du verrouillage

---

### ğŸ“¦ Installation (Inno Setup)
CrÃ©er un installateur `.exe` :
1. Installe dans `C:\Eterna\Eterna_V2_0_1`
2. CrÃ©e un raccourci bureau et menu dÃ©marrer
3. Installe Python 3.11 + Node.js si absents
4. TÃ©lÃ©charge les dÃ©pendances (pip install depuis `requirements.txt`)
5. VÃ©rifie la prÃ©sence des modÃ¨les :
C:\models\llama
C:\stable-diffusion\models
C:\coqui
C:\whisper
C:\esrgan\
6. Lance automatiquement `start_backend.bat` puis `Eterna.exe`
7. Ajoute option **DÃ©sinstaller proprement**

---

### ğŸ” GitHub & Build Automatique
- Push GitHub automatique aprÃ¨s build rÃ©ussi
- Workflow Actions dans `.github/workflows/build_and_push.yml`
- Ã‰tapes :
1. Build du frontend + backend
2. Test local du backend
3. Push auto
4. Rollback en cas dâ€™Ã©chec
- Commit : `"Auto-build Eterna v2.0.1 â€“ [timestamp]"`

---

### ğŸ“œ README.md (auto-gÃ©nÃ©rÃ©)
Doit inclure :
- Description complÃ¨te du projet
- Installation Ã©tape par Ã©tape
- Fonctionnement de chaque module IA
- Commandes principales (build, run, update)
- Structure du projet
- CrÃ©dits Eternadream

---

### ğŸ§± IntÃ©gration du projet **Jan (jan.ai)**
Utiliser la base open-source du projet **Jan** disponible sur GitHub :  
ğŸ‘‰ https://jan.ai  

Instructions :
1. Cloner le dÃ©pÃ´t Jan.
2. Conserver lâ€™architecture dâ€™exÃ©cution locale.
3. Adapter le code pour intÃ©grer les modules :
- LLaMA 3 (local)
- Stable Diffusion XL (visuel)
- Coqui XTTS (voix)
- Whisper (reconnaissance FR)
- ESRGAN (super-rÃ©solution)
4. Refonte complÃ¨te de lâ€™interface pour ressembler Ã  **Eterna** (WPF sombre).
5. Remplacer les API cloud par les modÃ¨les locaux (offline-first).
6. Ajouter lâ€™auto-coder et le verrou de sÃ©curitÃ©.
7. Conserver la compatibilitÃ© multi-plateforme (Windows, macOS, Linux).

---

### ğŸ§© RÃ©sultat attendu
Ã€ la fin :
- Lâ€™application WPF est **fonctionnelle, compilÃ©e et exÃ©cutable**
- Le backend FastAPI tourne localement
- Les modules IA sont **chargÃ©s Ã  la demande**
- Le setup Windows (`EternaInstaller.exe`) est gÃ©nÃ©rÃ©
- Le dÃ©pÃ´t GitHub reÃ§oit le push automatique complet
- Lâ€™utilisateur peut lancer Eterna localement et parler directement avec elle

---

### ğŸ› ï¸ RÃ¨gles de Codex
- Aucun prompt de confirmation GitHub : push automatique.
- Tous les chemins doivent Ãªtre relatifs au projet.
- Aucun blocage dâ€™installation.
- Tous les commentaires en **franÃ§ais clair**.
- Lâ€™ensemble doit compiler et tourner directement sur Windows 10/11.

